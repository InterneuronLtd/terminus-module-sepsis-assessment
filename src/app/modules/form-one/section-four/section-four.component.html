<!--BEGIN LICENSE BLOCK--> 
<!--Interneuron Terminus

Copyright(C) 2024  Interneuron Limited

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.If not, see<http://www.gnu.org/licenses/>. -->
<!--END LICENSE BLOCK--> 

<div class="clearfix">
   <!-- <div class="row"> -->
   <!-- <div class="col-md-10"> -->
   <div class="d-flex justify-content-start flex-row">
      <div class="flex-grow-1">
         <div class="card text-left">
            <div class="card-header"></div>
            <div class="card-body">
               <div class="row">
                  <div class="col-xs-5 col-sm-4 col-md-3 section-number">
                     <h1 class="card-title">04</h1>
                  </div>
                  <div class="col-md-6">
                     <div class="row">
                        <div class="col-md-12 section-header-text">
                           ANY <i>AMBER</i> FLAG PRESENT?
                        </div>
                     </div>
                     <div class="row" style="text-align: center;">
                        <div class="col-md-12">
                           <div class="btn-group" (click)="onDecisionChange($event)" btnRadioGroup
                              [(ngModel)]="sectionFourVM.selectedYesNo">
                              <label class="btn btn-secondary"
                                 [ngClass]="{'focus active': sectionFourVM.selectedYesNo == 'NOT ANSWERED', 'action-btn-group-disabled': readOnly}"
                                 btnRadio="NOT ANSWERED" [disabled]="readOnly" tabindex="0" role="button">NOT
                                 ANSWERED</label>
                              <label class="btn btn-success"
                                 [ngClass]="{'focus active': sectionFourVM.selectedYesNo == 'YES', 'action-btn-group-disabled': readOnly}"
                                 btnRadio="YES" tabindex="1" [disabled]="readOnly" role="button">YES</label>
                              <label class="btn btn-danger"
                                 [ngClass]="{'focus active': sectionFourVM.selectedYesNo == 'NO', 'action-btn-group-disabled': readOnly}"
                                 btnRadio="NO" tabindex="2" [disabled]="readOnly" role="button">NO</label>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div *ngIf="displaySelectionText" class="d-flex flex-row-reverse col-md-3">
                     <div class="font-weight-bold" style="font-size: 1.5rem" [ngClass]="displaySelectionCss">
                       {{displaySelectionText}}</div>
                   </div>
               </div>
               <div class="d-flex flex-row flex-wrap options-checkbox-container">
                  <div class="options-checkbox">
                     <app-option-checkbox key="Notrespondingnormallynosmile"
                       text="Not responding normally / no smile" [modelToBind]="sectionFourVM"
                       [disabled]="readOnly || disableOptions" (optionChange)="onOptionChange($event)"></app-option-checkbox>
                   </div>
                  <div class="options-checkbox">
                     <app-option-checkbox key="Reducedactivityverysleepy"
                       text="Reduced activity / very sleepy" [modelToBind]="sectionFourVM"
                       [disabled]="readOnly || disableOptions" (optionChange)="onOptionChange($event)"></app-option-checkbox>
                   </div>
                   <div class="options-checkbox">
                     <app-option-checkbox key="parentalorcarerconcern"
                       text="Parental or carer concern" [modelToBind]="sectionFourVM"
                       [disabled]="readOnly || disableOptions" (optionChange)="onOptionChange($event)"></app-option-checkbox>
                   </div>
                  <div class="options-checkbox">
                     <app-option-checkbox key="Moderatetachypnoea" actionText="(see chart)" (actionTextClick)= "showChart($event)"
                       text=" Moderate tachypnoea" [modelToBind]="sectionFourVM"
                       [disabled]="readOnly || disableOptions" (optionChange)="onOptionChange($event)"></app-option-checkbox>
                   </div>
                  <div class="options-checkbox">
                     <app-option-checkbox key="Moderatetachycardia" actionText="(see chart)" (actionTextClick)= "showChart($event)"
                       text="Moderate tachycardia" [modelToBind]="sectionFourVM"
                       [disabled]="readOnly || disableOptions" (optionChange)="onOptionChange($event)"></app-option-checkbox>
                   </div>
                  <div class="options-checkbox">
                     <app-option-checkbox key="SpO2lessthen92perorincreasedO2requirement"
                       text="SpO2 < 92% or increased O2 requirement" [modelToBind]="sectionFourVM"
                       [disabled]="readOnly || disableOptions" (optionChange)="onOptionChange($event)"></app-option-checkbox>
                   </div>
                  <div class="options-checkbox">
                     <app-option-checkbox key="Nasalflaring"
                       text="Nasal flaring" [modelToBind]="sectionFourVM"
                       [disabled]="readOnly || disableOptions" (optionChange)="onOptionChange($event)"></app-option-checkbox>
                   </div>
                  <div class="options-checkbox">
                     <app-option-checkbox key="Capillaryrefilltime3seconds"
                       text="Capillary refill time â‰¥ 3 seconds" [modelToBind]="sectionFourVM"
                       [disabled]="readOnly || disableOptions" (optionChange)="onOptionChange($event)"></app-option-checkbox>
                   </div>
                  <div class="options-checkbox">
                     <app-option-checkbox key="Reducedurineoutput"
                       text="Reduced urine output (< 1 ml/kg/h if catheterised)" [modelToBind]="sectionFourVM"
                       [disabled]="readOnly || disableOptions" (optionChange)="onOptionChange($event)"></app-option-checkbox>
                   </div>
                  <div class="options-checkbox">
                     <app-option-checkbox key="Legpainorcoldextremities"
                       text="Leg pain or cold extremities" [modelToBind]="sectionFourVM"
                       [disabled]="readOnly || disableOptions" (optionChange)="onOptionChange($event)"></app-option-checkbox>
                   </div>
                  <div class="options-checkbox">
                     <app-option-checkbox key="Immunocompromised"
                       text="Immunocompromised" [modelToBind]="sectionFourVM"
                       [disabled]="readOnly || disableOptions" (optionChange)="onOptionChange($event)"></app-option-checkbox>
                   </div>
               </div>
            </div>
         </div>
      </div>
   </div>
   <div>
      <message-popup [showMessagePopup]="showConfirmationMessagePopup"
         [genericMessagePopupVM]="confirmationMessagePopup">
      </message-popup>
      <loading-indicator [showLoadingIndicator]="showLoadingIndicator"></loading-indicator>
      <message-popup [showMessagePopup]="showSaveStatusMessagePopup" [genericMessagePopupVM]="saveStatusMessagePopup">
      </message-popup>
      <chart-reading [displayChart]="displayChart" showUpto5="true" (close)="onChartClose($event)"></chart-reading>
   </div>
</div>
<div *ngIf="showAmberActionPanel" class="d-flex align-content-center flex-wrap section-submit-panel">
   <div class="submit-box align-middle" [class.opened]="showAmberActionPanel">
      <h2> FURTHER REVIEW REQUIRED</h2>
      <button type="button" (click)="confirmSave(true)" class="btn btn-primary">Submit</button>
   </div>
</div>
<div class="card-header no-amber-panel" *ngIf="showSubmitPanel">
   <span class="cls_018">NO AMBER FLAGS = ROUTINE CARE / CONSIDER OTHER DIAGNOSIS</span>
   <div><button type="button" class="btn btn-success" (click)="confirmSave(false)">Submit</button></div>
</div>